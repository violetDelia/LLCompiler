function(build_abseil lib_path)
    message("******************************************")
    message("************* build abseil ***************")
    message("******************************************")
    set(ABSL_PROPAGATE_CXX_STD ON)
    set(ABSL_ENABLE_INSTALL OFF)

    if(BUILD_SHARED_LIBS)
        set(ABSL_BUILD_DLL ON)
        set(ABSL_BUILD_MONOLITHIC_SHARED_LIBS ON)
    else()
        set(ABSL_BUILD_DLL OFF)
        set(ABSL_BUILD_MONOLITHIC_SHARED_LIBS OFF)
    endif()

    set(ABSL_BUILD_TESTING OFF)
    set(ABSL_BUILD_TEST_HELPERS OFF)
    include(${lib_path}/CMake/AbseilHelpers.cmake)
    include(${lib_path}/CMake/AbseilDll.cmake)
    add_subdirectory(${lib_path}/absl/base)
    add_subdirectory(${lib_path}/absl/algorithm)
    add_subdirectory(${lib_path}/absl/cleanup)
    add_subdirectory(${lib_path}/absl/container)
    add_subdirectory(${lib_path}/absl/crc)
    add_subdirectory(${lib_path}/absl/debugging)
    add_subdirectory(${lib_path}/absl/flags)
    add_subdirectory(${lib_path}/absl/functional)
    add_subdirectory(${lib_path}/absl/hash)
    add_subdirectory(${lib_path}/absl/memory)
    add_subdirectory(${lib_path}/absl/meta)
    add_subdirectory(${lib_path}/absl/numeric)
    add_subdirectory(${lib_path}/absl/profiling)
    add_subdirectory(${lib_path}/absl/random)
    add_subdirectory(${lib_path}/absl/status)
    add_subdirectory(${lib_path}/absl/strings)
    add_subdirectory(${lib_path}/absl/synchronization)
    add_subdirectory(${lib_path}/absl/time)
    add_subdirectory(${lib_path}/absl/types)
    add_subdirectory(${lib_path}/absl/utility)
endfunction(build_abseil)